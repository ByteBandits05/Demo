# databricks.yml
# Databricks Asset Bundle configuration for deployment across dev, qa, and prod environments.
# Edit 'host' and 'root_path' values in each target and job as needed.

bundle:
  name: databricks-demo-asset-bundle # Descriptive name for the bundle

targets:
  dev: # Default environment
    default: true
    workspace:
      host: https://dbc-d56de9ca-1926.cloud.databricks.com/      # <-- Customize this URL for your DEV Databricks workspace
      root_path: /Workspace/YourProject       # <-- Set the root path for DEV
  qa:
    workspace:
      host: https://dbc-d56de9ca-1926.cloud.databricks.com/       # <-- Customize this URL for your QA Databricks workspace
      root_path: /Workspace/YourProject       # <-- Set the root path for QA
  prod:
    workspace:
      host: https://dbc-d56de9ca-1926.cloud.databricks.com/       # <-- Customize this URL for your PROD Databricks workspace
      root_path: /Workspace/YourProject       # <-- Set the root path for PROD

resources:
  jobs:
    pytest:
      name: pytest
      notebook_task:
        notebook_path: /Workspace/YourProject/files/pytest/test_file  # <-- Ensure this matches the root_path above
      queue:
        enabled: true
      job_clusters:
        - job_cluster_key: serverless
          new_cluster:
            # No explicit cluster config; runs on serverless
            spark_version: auto
            node_type_id: serverless
      tags:
        environment: ${bundle.target}  # Automatically set to dev, qa, or prod
        job_type: test
      performance_target: STANDARD
    smoke_test:
      name: smoke_test
      notebook_task:
        notebook_path: /Workspace/YourProject/files/smoke/smoke_test  # <-- Ensure this matches the root_path above
      queue:
        enabled: true
      job_clusters:
        - job_cluster_key: serverless
          new_cluster:
            # No explicit cluster config; runs on serverless
            spark_version: auto
            node_type_id: serverless
      tags:
        environment: ${bundle.target}  # Automatically set to dev, qa, or prod
        job_type: smoke
      performance_target: STANDARD

# To use: Copy this file, then edit host and root_path in each target and job notebook_path as needed for your organization.
